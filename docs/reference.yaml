---
- tag: v-with
  arguments:
  - name: source
    templated: true
  description: |
    Include content block if variable is truthy. Sets the variable of children to the target if it is supplied.

  example: |
    <v-json target="$dog" >
      {
        "name": "Freddy"
      }
    </v-json>

    <v-with source="$dog.name" as="$name" >
      <p>This will display the name : $name </p>
    </v-with>

    <v-with source="$dog.phone_number" >
      <p>This would not display anything</p>
    </v-with>

- tag: v-if
  arguments:
  - name: eq
    optional: true
    templated: true
  - name: lt
    optional: true
    templated: true
  - name: lte
    optional: true
    templated: true
  - name: gt
    optional: true
    templated: true
  - name: gte
    optional: true
    templated: true
  - default: $
    name: source
    templated: true
  description: |
    Display the contents only when the condition matches.

    By default the contents are displayed when $source is considered truthy.

- tag: v-unless
  arguments:
  - name: eq
    optional: true
    templated: true
  - name: lt
    optional: true
    templated: true
  - name: lte
    optional: true
    templated: true
  - name: gt
    optional: true
    templated: true
  - name: gte
    optional: true
    templated: true
  - default: $
    name: source
    templated: true
  description: |
    Display the contents only when the condition does not match.

- tag: v-json
  arguments:
  - name: target
  - name: src
    optional: true
    relative: true
  description: Create a new variable at target from a json body or using the src argument

- tag: v-yaml
  arguments:
  - name: target
  - name: src
    relative: true
  description: |
    Create a new variable at target from a yaml document specified by the src argument.

    Cannot use a body due to confusing indenting.

- tag: v-markdown
  arguments:
  - name: src
  description: |
    Load in-place a markdown document.

    This is currently not templated at all.

- tag: v-sql
  arguments:
  - name: target
  - name: single-row
    optional: true
  description: Execute sql query and set a new variable at target

- tag: v-nodejs
  arguments:
  - name: target
  - name: loader-only
    optional: true
  description: Embed a nodejs function and set target to the return value

- tag: v-dump
  description: Dump the current variable as json inside a pre tag

- tag: v-hint-port
  arguments:
  - default: "3000"
    name: port
  description: A hint to the siskin engine to listen on this port

- tag: v-page
  arguments:
  - name: path
  description: Define a page within the document.

- tag: v-expose
  arguments:
  - name: path
  - name: content-type
    optional: true
  - name: src
  description: Expose a file specified at (src) at http (path)
  special: true

- tag: v-set-cookie
  form-ony: true
  arguments:
  - name: name
    templated: true
  - name: value
    templated: true
  - name: max-seconds
    templated: true
  - name: max-minutes
    templated: true
  - name: max-hours
    templated: true
  - name: max-days
    templated: true
  description: |
    Set a response cookie.

    The maximum cookie age will be set to the sum of the max-* attribute values.

- tag: v-include
  description: Include an external siskin-xml file. This tag is processed before anything
    else.
  pre-process: true

- tag: form
  arguments:
  - name: v-name
    description: "The endpoint name to create for this action"
  - name: v-ajax
    description: "Strip out the method and action for this form"
  description: |
    Although form is an inbuilt tag we do alter it's behaviour. Defining a form with
    method="POST" and an v-name attribute will create an action endpoint.

- tag: v-check-*
  arguments:
  - name: eq
    optional: true
    templated: true
  - name: lt
    optional: true
    templated: true
  - name: lte
    optional: true
    templated: true
  - name: gt
    optional: true
    templated: true
  - name: gte
    optional: true
    templated: true
  - default: $
    name: source
    templated: true
  description: |
    Similar to the v-if tags the v-check-* tags will conditionally display a block.

    Unlike the x-if tag an error status will be set for the whole page if the condition
    is not met.

    Useful for creating an error-barrier for resources.

  example: |
    <v-sql target="$user" >select * from user where email = $.headers.x-email</v-sql>

    <v-check-authorized source="$user" >
      <p>Some sensitive information here...</p>
    </v-check-authorized>


- tag: v-catch
  description: |
    Rendered when an error has occured. The root variables `$.error.code` and `$.error.message`
    will be available to display.

    This tag is roughly equivilent to calling `<v-if source="$.error" >...</v-if>`

- tag: v-try
  description: |
    Rendered when no error has occured. Useful when a section may result in an error.

- tag: v-set-status
  actionVariant: true
  arguments:
  - name: code
    description: "Return code to send. Must be numeric."
    templated: true
  description: |
    Set the status code.

    Rendering will continue as normal. If you want to report a non-success status take
    a look at the v-check-* tags instead.

- tag: v-redirect
  arguments:
  - name: path
    description: "Path to redirect to"
    templated: true
  description:
    Redirect the client to the specied path.
